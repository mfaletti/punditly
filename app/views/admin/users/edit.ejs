<% layout('../../../layouts/admin') -%>
<% block('title',' - Edit User')%>
<% stylesheet('/css/user.min.css') -%>
<% script('/js/views/admin/users/edit.js') -%>
<div class="row">
	<div class="col-xs-12">
		<div id="header"></div>
		<div id="identity"></div>
		<div id="roles"></div>
		<div id="password"></div>
		<div id="delete"></div>
	</div>
</div>
<script type="text/template", id="tmpl-header">
	<div class="page-header"><h1><a href="/admin/users/">Users</a> / {{=username}}</h1></div>
</script>
<script type="text/template", id="tmpl-identity">
	<fieldset>
		<legend>Identity</legend>
		<div class="alerts">
			{{ _.each(errors, function(err) { }}
			<div class="alert alert-danger alert-dismissable">
				<button class="close" type="button" data-dismiss="alert">&times;</button>{{ err }}
			</div>
			{{ }); }}
			{{ if (success) { }}
			<div class="alert alert-info alert-dismissable">
				<button class="close" type="button" data-dismiss="alert">&times;</button>Changes have been saved.
			{{ } }}
			</div>
		</div>
		<div class='control-group {{ errfor.is_active ? "has-error" : ""}}'>
			<label class="control-label">Is Active</label>
			<select class="form-control" name="is_active">
				<option value="true">yes</option>
				<option value="false">no</option>
			</select>
			<span class="help-block">{{- errfor.is_active }}</span>
		</div>
		<div class='control-group {{- errfor.username ? "has-error" : ""}}'>
			<label class="control-group">Username:</label>
			<input class="form-control" type="text" name="username" value='{{=username}}'>
			<span class="help-block">{{- errfor.username }}</span>
		</div>
		<div class='control-group {{- errfor.email ? "has-error" : "" }}'>
			<label class="control-label">Email:</label>
			<input class="form-control" type="text" name="email" value='{{=email}}'>
			<span class="help-block">{{- errfor.email }}</span>
		</div>
		<div class="control-group"><button class="btn btn-primary btn-update" type='button'>Update</button></div>
	</fieldset>
</script>
<script type="text/template" id="tmpl-password">
	<fieldset>
		<legend>Set Password</legend>
		<div class="alerts">
		{{ _.each(errors, function(err) { }}
			<div class="alert alert-danger alert-dismissable">
				<button class="close" type="button" data-dismiss="alert">&times;</button>{{- err}}
			</div>
		{{	}); }}
		</div>
		{{ if (success) { }}
		<div class="alert alert-info alert-dismissible">
			<button class="close" type="button" data-dismiss="alert">&times;</button>A new password has been set.
		</div>
		{{ } }}
		<div class='control-group {{- errfor.newPassword ? "has-error" : ""}}'>
			<label class="control-label">New Password</label>
			<input class="form-control" type="password" name="newPassword" value="{{= newPassword}}" />
			<span class="help-block">{{- errfor.newPassword}}</span>
		</div>
		<div class='control-group {{- errfor.confirm ? "has-error" : ""}}'>
			<label class="control-label">Confirm</label>
			<input class="form-control" type="password" name="confirm" value="{{= confirm}}" />
			<span class="help-block">{{- errfor.confirm}}</span>
		</div>
		<div class="control-group">
			<button class="btn btn-primary btn-password" type="button">Set Password</button>
		</div>
	</fieldset>
</script>
<script type="text/template" id="tmpl-delete">
	<fieldset>
		<legend>Danger Zone</legend>
		<div class="alerts">
		{{ _.each(errors, function() { }}
			<div class="alert alert-danger alert-dismissible">
				<button class="close" type="button" data-dismiss="alert">&times;</button>{{- err}}
			</div>
		{{ }); }}
		</div>
		<div class="control-group">
			<span class="help-block">
				<span class="label label-danger">If you do this, it cannot be undone.</span>
			</span>
		</div>
		<div class="control-group">
			<button class="btn btn-danger btn-delete" type="button">Delete</button>
		</div>
	</fieldset>
</script>
<script type="text/template" id="data-record"><%-data.record%></script>